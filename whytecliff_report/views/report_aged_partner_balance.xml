<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>
<template id="report_netbalance">
    <t t-call="report.html_container">
        <t t-call="report.internal_layout">
            <div class="page">
                <h3>Aged Summary - Net Receivables &amp; Payables - In Local Currency By Organization as at 
                    <span t-esc="datetime.datetime.now().strftime('%Y%m')"/> </h3>
                <div class="row mt32 mb32">
                    <div class="col-xs-3">
                        <strong>Chart of Accounts:</strong>
                        <p t-esc="get_account(data)"/>
                    </div>
                    <div class="col-xs-3">
                        <strong>Fiscal Year:</strong>
                        <p t-esc="get_fiscalyear(data)"/>
                    </div>
                    <div class="col-xs-3">
                        <strong>Local Currency:</strong>
                        <p t-esc="res_company.currency_id.name"/>
                    </div>
                </div>

                <table class="table table-condensed">
                    <thead>
                        <tr style='background:#D8D8D8;'>
                            <th>Organization Name</th>
                            <th class="text-right">Net Receivable / (Net Payable)</th>
                            <th class="text-right">Current</th>
                            <th class="text-right">Period 1</th>
                            <th class="text-right">Period 2</th>
                            <th class="text-right">Period 3+</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="get_org_type()" t-as="a">
                            <tr style="font-weight: bold;">
                                <td colspan="4">
                                    <span t-if="a == 'receivable'">Receivables</span>
                                    <span t-if="a == 'payable'">Payables</span>
                                </td>
                            </tr>
                            <tr t-foreach="lines(data,a)" t-as="line">
                                <td>
                                    <span style="color: white;" t-esc="'..'"/>
                                    <span t-esc="line.get('name')"/>
                                </td>
                                <td class="text-right">
                                    <span t-esc="formatLang(line.get('sum_net_balance'))"/>
                                </td>
                                <td class="text-right">
                                    <span t-esc="formatLang(line.get('current_balance'))"/>
                                </td>
                                <td class="text-right">
                                    <span t-esc="formatLang(line.get('period_1'))"/>
                                </td>
                                <td class="text-right">
                                    <span t-esc="formatLang(line.get('period_2'))"/>
                                </td>
                                <td class="text-right">
                                    <span t-esc="formatLang(line.get('period_3'))"/>
                                </td>
                            </tr>
                            <tr>
                                <t t-set="style" t-value="'font-weight: bold;'"/>
                                <td class="text-right" t-att-style="style">Total:</td>
                                <td class="text-right" t-foreach="get_total_balance(data,a)" t-as="val">
                                    <span t-att-style="style" t-esc="formatLang(val)"/>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </t>
    </t>
</template>
</data>
</openerp>